#!/usr/bin/env python3\n\"\"\"\nAIMEX ê¸°ë³¸ ì‹œë“œ ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸\n\nSOLID ì›ì¹™:\n- SRP: ì‹œë“œ ë°ì´í„° ìƒì„±ë§Œ ë‹´ë‹¹\n- OCP: ìƒˆë¡œìš´ ë°ì´í„° íƒ€ì… ì¶”ê°€ ì‹œ í™•ì¥ ê°€ëŠ¥\n- DIP: êµ¬ì²´ì ì¸ DB êµ¬í˜„ì´ ì•„ë‹Œ ì¶”ìƒí™”ëœ ëª¨ë¸ì— ì˜ì¡´\n\nClean Architecture:\n- ë„ë©”ì¸ ê³„ì¸µì˜ ì—”í‹°í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ìƒì„±\n- ì¸í”„ë¼ ê³„ì¸µì˜ ë°ì´í„°ë² ì´ìŠ¤ ì„¸ì…˜ì„ í†µí•´ ì €ì¥\n\"\"\"\n\nimport sys\nimport os\nfrom pathlib import Path\n\n# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ ì¶”ê°€\nproject_root = Path(__file__).parent / \"backend\"\nsys.path.insert(0, str(project_root))\n\ntry:\n    from app.database import SessionLocal, test_database_connection\n    from app.models.influencer import ModelMBTI, StylePreset\n    from app.models.user import Team\n    from sqlalchemy.exc import IntegrityError\n    import uuid\n    \n    def create_seed_data():\n        \"\"\"\n        ê¸°ë³¸ ì‹œë“œ ë°ì´í„° ìƒì„±\n        \n        Clean Architecture:\n        - Application Layer: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¡°ìœ¨\n        - Domain Layer: ì—”í‹°í‹° ë° ë„ë©”ì¸ ê·œì¹™\n        - Infrastructure Layer: ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼\n        \"\"\"\n        print(\"ğŸŒ± AIMEX ì‹œë“œ ë°ì´í„° ìƒì„± ì‹œì‘...\")\n        \n        # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸\n        if not test_database_connection():\n            print(\"âŒ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨\")\n            print(\"   - MySQL ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš”\")\n            print(\"   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”\")\n            return False\n        \n        db = SessionLocal()\n        try:\n            # 1. ê¸°ë³¸ íŒ€ ìƒì„± (team_id = 0: ê´€ë¦¬ì ê·¸ë£¹)\n            print(\"\\n1. ê¸°ë³¸ íŒ€ ë°ì´í„° ìƒì„±...\")\n            existing_admin_team = db.query(Team).filter(Team.team_id == 0).first()\n            if not existing_admin_team:\n                admin_team = Team(\n                    team_id=0,\n                    team_name=\"ê´€ë¦¬ì\",\n                    team_description=\"ì‹œìŠ¤í…œ ê´€ë¦¬ì ì „ìš© íŒ€\"\n                )\n                db.add(admin_team)\n                print(\"   âœ… ê´€ë¦¬ì íŒ€ ìƒì„±\")\n            else:\n                print(\"   â„¹ï¸  ê´€ë¦¬ì íŒ€ ì´ë¯¸ ì¡´ì¬\")\n                \n            # ê¸°ë³¸ ê°œë°œíŒ€ ìƒì„±\n            existing_dev_team = db.query(Team).filter(Team.team_name == \"ê°œë°œíŒ€\").first()\n            if not existing_dev_team:\n                dev_team = Team(\n                    team_name=\"ê°œë°œíŒ€\",\n                    team_description=\"AIMEX ê°œë°œíŒ€\"\n                )\n                db.add(dev_team)\n                print(\"   âœ… ê°œë°œíŒ€ ìƒì„±\")\n            else:\n                print(\"   â„¹ï¸  ê°œë°œíŒ€ ì´ë¯¸ ì¡´ì¬\")\n            \n            # 2. MBTI ë°ì´í„° ìƒì„±\n            print(\"\\n2. MBTI ì„±ê²© ìœ í˜• ë°ì´í„° ìƒì„±...\")\n            mbti_data = [\n                {\n                    \"mbti_name\": \"INTJ\",\n                    \"mbti_trait\": \"ì „ëµê°€í˜•. ë…ë¦½ì ì´ê³  ì°½ì˜ì ì´ë©° ë¯¸ë˜ì§€í–¥ì ì¸ ì‚¬ê³ ë¥¼ ê°€ì§‘ë‹ˆë‹¤.\",\n                    \"mbti_speech\": \"ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ë©°, ê°„ê²°í•˜ê³  ëª…í™•í•œ í‘œí˜„ì„ ì„ í˜¸í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"mbti_name\": \"ENFP\",\n                    \"mbti_trait\": \"í™œë™ê°€í˜•. ì—´ì •ì ì´ê³  ì°½ì˜ì ì´ë©° ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.\",\n                    \"mbti_speech\": \"í™œê¸°ì°¨ê³  ì¹œê·¼í•œ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ë©°, ê°ì •ì´ í’ë¶€í•œ í‘œí˜„ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"mbti_name\": \"ISFJ\",\n                    \"mbti_trait\": \"ìˆ˜í˜¸ìí˜•. ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ì´ ë§ìœ¼ë©° ì±…ì„ê°ì´ ê°•í•©ë‹ˆë‹¤.\",\n                    \"mbti_speech\": \"ë¶€ë“œëŸ½ê³  ì •ì¤‘í•œ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ë©°, ìƒëŒ€ë°©ì„ ë°°ë ¤í•˜ëŠ” í‘œí˜„ì„ ì„ í˜¸í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"mbti_name\": \"ESTP\",\n                    \"mbti_trait\": \"ì‚¬ì—…ê°€í˜•. í™œë™ì ì´ê³  í˜„ì‹¤ì ì´ë©° ì¦‰í¥ì ì¸ ê²°ì •ì„ ì˜ ë‚´ë¦½ë‹ˆë‹¤.\",\n                    \"mbti_speech\": \"ì§ì„¤ì ì´ê³  ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ë©°, ì¬ë¯¸ìˆëŠ” í‘œí˜„ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"mbti_name\": \"INFP\",\n                    \"mbti_trait\": \"ì¤‘ì¬ìí˜•. ì´ìƒì£¼ì˜ì ì´ê³  ì°½ì˜ì ì´ë©° ê°œì¸ì˜ ê°€ì¹˜ë¥¼ ì¤‘ì‹œí•©ë‹ˆë‹¤.\",\n                    \"mbti_speech\": \"ê°ì„±ì ì´ê³  ì§„ì‹¤í•œ ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ë©°, ì€ìœ ì ì¸ í‘œí˜„ì„ ì¦ê²¨ ì‚¬ìš©í•©ë‹ˆë‹¤.\"\n                }\n            ]\n            \n            for mbti_info in mbti_data:\n                existing_mbti = db.query(ModelMBTI).filter(\n                    ModelMBTI.mbti_name == mbti_info[\"mbti_name\"]\n                ).first()\n                \n                if not existing_mbti:\n                    mbti = ModelMBTI(\n                        mbti_name=mbti_info[\"mbti_name\"],\n                        mbti_trait=mbti_info[\"mbti_trait\"],\n                        mbti_speech=mbti_info[\"mbti_speech\"]\n                    )\n                    db.add(mbti)\n                    print(f\"   âœ… {mbti_info['mbti_name']} MBTI ìƒì„±\")\n                else:\n                    print(f\"   â„¹ï¸  {mbti_info['mbti_name']} MBTI ì´ë¯¸ ì¡´ì¬\")\n            \n            # 3. ê¸°ë³¸ ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹ ìƒì„±\n            print(\"\\n3. ê¸°ë³¸ ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹ ë°ì´í„° ìƒì„±...\")\n            preset_data = [\n                {\n                    \"style_preset_name\": \"ì¹œê·¼í•œ 20ëŒ€ ì—¬ì„±\",\n                    \"influencer_type\": 0,  # ì¸ê°„\n                    \"influencer_gender\": 1,  # ì—¬ì„±\n                    \"influencer_age_group\": \"20ëŒ€\",\n                    \"influencer_hairstyle\": \"ê¸´ ì›¨ì´ë¸Œ í—¤ì–´\",\n                    \"influencer_mood\": \"ë°ê³  ì¹œê·¼í•œ ë¶„ìœ„ê¸°\",\n                    \"influencer_personality\": \"ë°ê³  ê¸ì •ì ì´ë©° ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.\",\n                    \"influencer_speech\": \"ì¹œê·¼í•˜ê³  ë‹¤ì •í•œ ë§íˆ¬ë¡œ ì´ëª¨í‹°ì½˜ì„ ìì£¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"style_preset_name\": \"ì „ë¬¸ì ì¸ 30ëŒ€ ë‚¨ì„±\",\n                    \"influencer_type\": 0,  # ì¸ê°„\n                    \"influencer_gender\": 0,  # ë‚¨ì„±\n                    \"influencer_age_group\": \"30ëŒ€\",\n                    \"influencer_hairstyle\": \"ì§§ê³  ì •ëˆëœ í—¤ì–´\",\n                    \"influencer_mood\": \"ì‹ ë¢°ê° ìˆê³  ì „ë¬¸ì ì¸ ë¶„ìœ„ê¸°\",\n                    \"influencer_personality\": \"ì‹ ë¢°í•  ìˆ˜ ìˆê³  ì „ë¬¸ì ì´ë©° ë…¼ë¦¬ì ì¸ ì‚¬ê³ ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\",\n                    \"influencer_speech\": \"ì •ì¤‘í•˜ê³  ëª…í™•í•œ ë§íˆ¬ë¡œ ì „ë¬¸ ìš©ì–´ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•©ë‹ˆë‹¤.\"\n                },\n                {\n                    \"style_preset_name\": \"íŠ¸ë Œë””í•œ 10ëŒ€ ì—¬ì„±\",\n                    \"influencer_type\": 0,  # ì¸ê°„\n                    \"influencer_gender\": 1,  # ì—¬ì„±\n                    \"influencer_age_group\": \"10ëŒ€\",\n                    \"influencer_hairstyle\": \"ìˆì»¤íŠ¸ ë³´ë¸Œ\",\n                    \"influencer_mood\": \"íŠ¸ë Œë””í•˜ê³  í™œê¸°ì°¬ ë¶„ìœ„ê¸°\",\n                    \"influencer_personality\": \"íŠ¸ë Œë“œì— ë¯¼ê°í•˜ê³  í™œë°œí•˜ë©° ìƒˆë¡œìš´ ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.\",\n                    \"influencer_speech\": \"ì Šê³  í™œê¸°ì°¬ ë§íˆ¬ë¡œ ìœ í–‰ì–´ì™€ ì‹ ì¡°ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\"\n                }\n            ]\n            \n            for preset_info in preset_data:\n                existing_preset = db.query(StylePreset).filter(\n                    StylePreset.style_preset_name == preset_info[\"style_preset_name\"]\n                ).first()\n                \n                if not existing_preset:\n                    preset = StylePreset(\n                        style_preset_id=str(uuid.uuid4()),\n                        style_preset_name=preset_info[\"style_preset_name\"],\n                        influencer_type=preset_info[\"influencer_type\"],\n                        influencer_gender=preset_info[\"influencer_gender\"],\n                        influencer_age_group=preset_info[\"influencer_age_group\"],\n                        influencer_hairstyle=preset_info[\"influencer_hairstyle\"],\n                        influencer_mood=preset_info[\"influencer_mood\"],\n                        influencer_personality=preset_info[\"influencer_personality\"],\n                        influencer_speech=preset_info[\"influencer_speech\"]\n                    )\n                    db.add(preset)\n                    print(f\"   âœ… '{preset_info['style_preset_name']}' í”„ë¦¬ì…‹ ìƒì„±\")\n                else:\n                    print(f\"   â„¹ï¸  '{preset_info['style_preset_name']}' í”„ë¦¬ì…‹ ì´ë¯¸ ì¡´ì¬\")\n            \n            # ë³€ê²½ì‚¬í•­ ì»¤ë°‹\n            db.commit()\n            print(\"\\nğŸ‰ ì‹œë“œ ë°ì´í„° ìƒì„± ì™„ë£Œ!\")\n            print(\"\\nğŸ“Š ìƒì„±ëœ ë°ì´í„°:\")\n            \n            # ìƒì„±ëœ ë°ì´í„° í™•ì¸\n            team_count = db.query(Team).count()\n            mbti_count = db.query(ModelMBTI).count()\n            preset_count = db.query(StylePreset).count()\n            \n            print(f\"   - íŒ€: {team_count}ê°œ\")\n            print(f\"   - MBTI ìœ í˜•: {mbti_count}ê°œ\")\n            print(f\"   - ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹: {preset_count}ê°œ\")\n            \n            return True\n            \n        except IntegrityError as e:\n            db.rollback()\n            print(f\"âŒ ë°ì´í„° ë¬´ê²°ì„± ì˜¤ë¥˜: {e}\")\n            print(\"   ì¤‘ë³µëœ ë°ì´í„°ê°€ ìˆê±°ë‚˜ ì œì•½ì¡°ê±´ ìœ„ë°˜ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\")\n            return False\n        except Exception as e:\n            db.rollback()\n            print(f\"âŒ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {e}\")\n            import traceback\n            traceback.print_exc()\n            return False\n        finally:\n            db.close()\n    \n    def main():\n        \"\"\"ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜\"\"\"\n        print(\"=\"*50)\n        print(\"ğŸŒ± AIMEX ì‹œë“œ ë°ì´í„° ìƒì„±ê¸°\")\n        print(\"=\"*50)\n        \n        success = create_seed_data()\n        \n        if success:\n            print(\"\\nâœ… ì‹œë“œ ë°ì´í„° ìƒì„±ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\")\n            print(\"\\nğŸš€ ì´ì œ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\")\n            print(\"   cd backend && python run.py\")\n        else:\n            print(\"\\nâŒ ì‹œë“œ ë°ì´í„° ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\")\n            print(\"\\nğŸ”§ í•´ê²°ë°©ë²•:\")\n            print(\"   1. ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ ì‹¤í–‰ ìƒíƒœ í™•ì¸\")\n            print(\"   2. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ í™•ì¸\")\n            print(\"   3. í…Œì´ë¸”ì´ ìƒì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\")\n            return 1\n        \n        return 0\n    \n    if __name__ == \"__main__\":\n        exit(main())\n        \nexcept ImportError as e:\n    print(f\"âŒ ëª¨ë“ˆ ì„í¬íŠ¸ ì˜¤ë¥˜: {e}\")\n    print(\"\\ní•´ê²°ë°©ë²•:\")\n    print(\"1. ê°€ìƒí™˜ê²½ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\")\n    print(\"2. ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜: pip install -r backend/requirements.txt\")\n    print(\"3. PYTHONPATH ì„¤ì • í™•ì¸\")\nexcept Exception as e:\n    print(f\"âŒ ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜: {e}\")\n    import traceback\n    traceback.print_exc()\n